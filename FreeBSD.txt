+---------+
| FreeBSD |
+---------+
(na podstawie wersji 10.4 i 11.2)

Linki
=====
https://forums.freebsd.org/
- oficjalne forum
https://www.freshports.org/
- wszystko o pakietach i portach


Pakiety
=======
# pkg update
- aktualizacja listy pakietów
# pkg upgrade
- aktualizacja wszystkich zainstalowanych pakietów
# pkg install mc
- instalacja pakietu np. mc
# pkg delete mc
- deinstalacja pakietu
# pkg remove mc
- deinstalacja pakietu
# pkg search samba
- wyszukiwanie pakietów zawierających w swojej nazwie wyraz 'samba' (wielkość liter nie ma znaczenia)
# pkg info
- informacja o wszystkich zainstalowanych pakietach (łącznie z bibliotekami)
# pkg fetch bsdrain
- tylko pobiera pakiet *.txt do katalogu /var/cache/pkg/
# pkg help
- pomoc programu pkg


Porty
=====
Przykład instalacji programu 'bsdrain' za pomocą portów:
# whereis bsdrain
bsdrain: /usr/ports/games/bsdrain
# cd /usr/ports/games/bsdrain
# make
# make install
# make clean
# rain
- zainstalowany został program 'rain' w katalogu /usr/local/bin/

# make
- kompilacja ze źródeł
# make install
- instalacja binarki, manuala, itp. do odpowiednich katalogów
# make clean
- usuwa pliki tymczasowe

# make install clean
- kompiluje, instaluje i czyści (3w1)

# make deinstall
- usuwa binarkę, manuala itp.

# make fetch
- tylko pobiera źródła do /usr/ports/distfiles/


rc.conf - system configuration information - główny plik konfiguracyjny systemu
===============================================================================
https://www.freebsd.org/cgi/man.cgi?rc.conf(5)
/etc/rc.conf
------------
  keymap="pl.kbd"
  - typ klawiatury
  hostname="freebsd11"
  - nazwa hosta
  ifconfig_<interface>="inet 192.168.200.200 netmask 255.255.255.0"
  - ustawienia sieciowe (np. ifconfig_em0 ...)
  defaultrouter="192.168.200.1"
  - brama domyślna
  allscreens_flags="MODE_32"
  - ustawienie trybu (vidcontrol MODE_32) dla konsoli tekstowej
  # DEMONY (USŁUGI)
  dbus_enable="YES"
  - system komunikacji międzyprocesowej (po instalacji: pkg install xfce | wymagane przez XFCE)
    /usr/local/etc/rc.d/dbus
    D-Bus - prosty system komunikacji międzyprocesowej, który pozwala programom na wymianę komunikatów między sobą
  firebird_enable="YES"
  - serwer Firebird SQL (po instalacji: pkg install firebird25-server)
  hald_enable="YES"
  - warstwa abstracji sprzętu - HARDWARE ABSTRACTION LAYER (po instalacji: pkg install xfce | wymagane przez XFCE)
    /usr/local/etc/rc.d/hald
    HAL - ogniwo pośredniczące (interfejs) pomiędzy sprzętem a jądrem systemu operacyjnego
  ntpd_enable="YES"
  - demon NTP (Network Time Protocol)
  slim_enable="YES"
  - Simple Login Manager (po instalacji: pkg install slim slim-themes)
    /usr/local/etc/rc.d/slim
  sshd_enable="YES"
  - demon SSH (Secure Shell)
  
  Plik /etc/rc.conf można edytować ręcznie lub komendą sysrc:
  # sysrc hald_enable=YES
  --> hald_enable="YES"
  

Zmiana ustawień sieciowych
==========================
/etc/rc.conf
------------
  ifconfig_em0="inet 192.168.200.200 netmask 255.255.255.0"
  defaultrouter="192.168.200.1"
  
/etc/resolv.conf
----------------
  nameserver 8.8.8.8
  nameserver 1.1.1.1
  
# reboot <lub> # /etc/netstart


SSH root login
==============
/etc/ssh/sshd_config
--------------------
  # PermitRootLogin no  -->  PermitRootLogin yes
  
# /etc/rc.d/sshd restart


Pożyteczne polecenia (alfabetycznie)
====================================
date - ustawienia daty i czasu
----
# date
- wyświetla aktualną datę i czas
# date 2157
- ustawia godzinę na 21:57
# date 1809132157
- ustawia datę na 2018-09-13 i godzinę na 21:57 (! wtedy to pisałem !)

kldload - dołączenie/wczytanie pliku (modułu lub sterownika) do kernela
-------
# kldload snake_saver

kldstat - lista załadowanych (kldload) modułów
-------
# kldstat
# kldstat -v

kldunload - usunięcie modułu lub sterownika z pamięci
---------
# kldunload snake_saver

pciconf - informacja o urządzeniach PCI/AGP
-------
# pciconf -lv

uptime - informacja o czasie pracy systemu, ilości zalogowanych użytkowników oraz średnim obciążeniu systemu

vidcontrol - ustawienia konsoli tekstowej
----------
# vidcontrol -t 60
- uruchomienie wygaszacza ekranu po 60 sekundach (np. kldload snake_saver)
# vidcontrol -t off
- wyłączenie wygaszacza ekranu
# vidcontrol -i adapter
- informacja o karcie graficznej
# vidcontrol -i mode
- informacja o dostępnych trybach graficznych i tekstowych dla konsoli
# vidcontrol MODE_32
- ustawienie dane trybu karty graficznej dla konsoli (najlepiej wybrać tryb dostosowany do natywnej rozdzielczości matrycy)
/etc/rc.conf: allscreens_flags="MODE_32"


Moduły jądra
============
/boot/kernel/

Wygaszacze ekranu:
------------------
/boot/kernel/blank_saver.ko
beastie_saver.ko
daemon_saver.ko
dragon_saver.ko
fade_saver.ko
fire_saver.ko
green_saver.ko
logo_saver.ko
rain_saver.ko
snake_saver.ko
star_saver.ko
warp_saver.ko


Ciekawe manuale
===============
man hald - HAL daemon
man hier - struktura katalogów


Serwer X-ów (X.Org X Server - X Window System)
==============================================
# pkg install xorg

# X
# Xorg
- czysty X Window System (odpalanie programów z konsoli tekstowej np. # xeyes -display :0)
# X -configure
# Xorg -configure
- tworzy plik konfiguracyjny dla X-ów (~/xorg.conf.new), który można modyfikować
# X -config /root/xorg.conf.new
# Xorg -config /root/xorg.conf.new
- uruchamia serwer X z konfiguracją xorg.conf.new
  konfigurację możemy skopiować do /usr/local/etc/X11/xorg.conf.d/<dowolna_nazwa>.conf i odpalać # startx
# X -showopts
# Xorg -showopts
- sprawdzenie driverów grafiki i dostępnych opcji

# xinit
- czysty X Window System + xterm

# startx
- domyślnie uruchamia menadżera okien TWM
  inny Window Manager (np. FVWM) lub inne Desktop Environment (np. XFCE) jest uruchamiane, gdy jest wpis w pliku ~/.xinit.rc:
    np.  exec fvwm
    lub  exec startxfce4
    
Dodatkowe sterowniki do kart graficznych:
[1] porty np.
/usr/ports/x11-drivers/xf86-video-trident/
[2] pakiety np.
# pkg install xf86-video-trident

FVWM (F Virtual Window Manager)
===============================
- menadżer okien
https://www.freebsd.org/cgi/man.cgi?query=fvwm

# pkg install fvwm

~/.xinitrc
----------
  exec fvwm

# startx

Plik konfiguracyjny: /usr/local/etc/system.fvwm2rc
--------------------------------------------------
  # uruchomienie aplikacji przy starcie menadżera
  Exec xterm

FVWM-Crystal
============
- nakładka (temat ang. theme) na FVWM

# pkg install fvwm-crystal

~/.xinitrc
----------
  exec fvwm-crystal

# startx

XFCE
====
- środowisko graficzne

# pkg install xfce

wymagany wpis w /etc/rc.conf
----------------------------
  dbus_enable="YES"
  hald_enable="YES"  # ???
  
 ~/.xinitrc
 ----------
   exec startxfce4
   
 # startx
 
 można też uruchamiać # startxfce4


